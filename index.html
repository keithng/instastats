<!DOCTYPE html>
<html lang="en">
<head>
  <title>Instastats Demo</title>

  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">
  <link href="./css/instastats.css" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js" type="text/javascript" charset="utf-8"></script>
  <script src="https://code.jquery.com/jquery-3.2.1.min.js"                                  type="text/javascript" charset="utf-8"></script>
  <script src="https://d3js.org/d3.v4.min.js"                                                type="text/javascript" charset="utf-8"></script>
  <script src="./lib/instastats.js"                                                          type="text/javascript" charset="utf-8"></script>
  <script>
    window.onload = function () {
/*       // Explore mode: Dropdown box to select subject and groups
      var graph     = new InstaStats({
        targ    : "#graph",                           // Must match id of div where the graph is going to go
        key     : "5acb96a85506437badbfb0a8f961488a", // API key - GET YOUR OWN, as this one may be revoked at any time
      })
 */
/*       // Fixed mode: Show predefined subject and group
      var graph     = new InstaStats({
        targ    : "#graph",                           // Must match id of div where the graph is going to go
        key     : "5acb96a85506437badbfb0a8f961488a", // API key - GET YOUR OWN, as this one may be revoked at any time
        subject : "crt",                                             // Optional: Defining here means it's fixed
        group   : "Christchurch activity by ANZSIC06 division A/S/T" // Optional: Defining here means it's fixed
      })
 */
      // URL mode: Subject and group are grabbed from the URL
      var url    = decodeURIComponent(window.location.search),
          params = {}
      _.each(url.replace("?", "").split("&"), function (v) {
        v = v.split("=")
        params[v[0]] = v[1]
      })

      var graph     = new InstaStats({
        targ    : "#graph",                           // Must match id of div where the graph is going to go
        key     : "5acb96a85506437badbfb0a8f961488a", // API key - GET YOUR OWN, as this one may be revoked at any time
        subject : params.subject,
        group   : params.group
      })
    }
  </script>
</head>
<body>
  <div id="graph"></div>
</body>
</html>
